<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    <meta name="description" content="BOJIT Projects, tutorials and ramblings.">
    <meta name="keywords" content="BOJIT,Github,James Bennion-Pedley,engineering,
    programming,Raspberry Pi,Linux,C++,MagicQ,lighting,theatre,electronics">

    <!--Author-->
    <meta name="author" content="James B-P">
    

    <!--Open Graph Title + Favicon -->
    <meta property="og:title" content="BOJIT"/>
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
    
    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="BOJIT"/>

    <!--Type page-->
    <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="BOJIT>" />
    
    <!-- Title -->  
    <title>BOJIT - Artnet Node</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/w3.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC|Comfortaa|Gloria+Hallelujah|Gochi+Hand|Kalam|Shadows+Into+Light&display=swap" rel="stylesheet">

    <!-- Styles -->
    <style> 
        body {
            margin: 0;
            padding: 0;
        }
        h2 {
            font-family: 'Gloria Hallelujah', cursive;
        }
        h4 {
            font-family: 'Gloria Hallelujah', cursive;
        }
        p {
            font-family: 'Comfortaa', cursive;
        }
        h2.link:hover {
            filter: invert(100%);
        }
        img.blog_panel {
            padding: 0;
            -moz-border-radius: 0px;
            -webkit-border-radius: 0px;
            border-radius: 0px;
            width: 100%;
        }
        .navbar.navbar-default {
            background-image: linear-gradient(rgba(0,0,0,1),rgba(0,0,0,0.6),rgba(0,0,0,0));
            border: 0;
            -webkit-box-shadow: none;
            box-shadow: none;
        }
        @media (max-width: 768px) {
            .navbar.navbar-default {
                background-image: linear-gradient(rgba(255,255,255,1),rgba(255,255,255,1));
            }
        }
        #null {
            font-family: 'Comfortaa', cursive;
            font-family: 'Gloria Hallelujah', cursive;
            font-family: 'Shadows Into Light', cursive;
            font-family: 'Amatic SC', cursive;
            font-family: 'Kalam', cursive;
            font-family: 'Gochi Hand', cursive;
        }
        .tile {
            position: relative;
            text-align: center;
            color: black;
        }
        .text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: .25s ease;
            display: none;
            pointer-events: none;
            font-family: 'Gloria Hallelujah', cursive;
            font-size: calc(6vw * var(--fontMultiplier));
        }
        .blog-item {
            width: var(--desktopWidth);
        }
        @media (max-width: 768px) {
            .text {
                font-size: calc(20vw * var(--fontMultiplier));
            }
            .blog-item {
                width: 100%;
            }   
        }
        img.blog_panel:hover + .text {
            display: block;
        }
    </style>

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-141105755-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-141105755-1');
    </script>
</head>

<body>
    <!-- Menu -->
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button style="padding:15px" type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- Socials -->
                <div style="padding:10px">
                <ul class="list-inline navbar-left">
                    <li>
                        <a href="https://www.youtube.com/channel/UCR7zc0TblvkjPy9DhAWUkvA" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-youtube-play fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/james-bennion-pedley-bab14a146/" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/BOJIT" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.facebook.com/James.BOJIT" target="_blank">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                        </span>
                        </a>
                    </li>
                    <li>
                        <a href="https://soundcloud.com/james-bojit" target="_blank">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-soundcloud fa-stack-1x fa-inverse"></i>
                        </span>
                        </a>
                    </li>
                </ul>
                </div>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="/projects">Projects</a>
                    </li>
                    <li>
                        <a href="/tutorials">Tutorials</a>
                    </li>
                    <li>
                        <a href="/about">About</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Main Content -->

    <!-- Page Header -->
    <!-- Set your background image for this header in the theme's configuration: index_cover -->
    <header class="intro-header" style="background-image: url('/img/BannerSmall.jpg');padding:0px">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="w3-center w3-padding-32">
                        <br>
                        <br>
                        <br>
                        <img src="/img/BOJIT_Logo_Alias_Small.png" placeholder="BOJIT"></img>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="w3-container w3-center">
        <h2 class="heading" style="color:black"><b>ARTNET NODE:</b></h2>
        <h4 class="heading" style="color:gray">18-02-18</h4>
    </div>
    <div class="w3-container">
        <div class="w3-container">
            <p>
                Recently, there have been a variety of events where I have needed more than one universe of DMX for a show. Particularly
                when bringing shows into other venues, often the rig is spread out over multiple DMX universes, and having more than one DMX
                output is always handy.<br>
                For most theatre shows, I use MagicQ on PC with the <a href="https://www.enttec.co.uk/product/protocols-gb/dmx512-gb/2-universe-usb-computer-interface-dmx/" target="_blank">
                Entecc DMX USB Pro</a>, but MagicQ only allows the use of one single universe of DMX out over a USB interface, meaning I cannot simply use
                two of them to get two universes of DMX out of the software. However, MagicQ does allow the full <b>64 universes</b> to be output over Artnet/sACN,
                even in demo mode! Now, you can buy these at an 'affordable' price relative to the cost of professional kit, but they are still a bit on the expensive
                side for a hobbyist. A fun alternative is to make one! The unit pictured below cost me about £20 in parts, and depending on what you have lying around
                could be even cheaper. The system is built around an Arduino Mega, so is relatively easy to modify to suit people's particular needs, and the 
                unit is much less liable to crash MagicQ than the Entecc converters in my experience.
            </p>
            <div class="w3-container blog-item" style="margin:auto;--desktopWidth:50%">
                <img src="img/Artnet Node.JPG" placeholder="Artnet Node" width="100%">
            </div>
            <p>
                The core of this project is based on the DMX library made available by Toni Merino, available <a href="https://blog.deskontrol.net/arduino-based-dmx-artnet-node/"
                target="_blank">here</a>. This supports one universe of DMX on the Arduino Uno, and up to four on the Arduino Mega (performance starts
                to suffer at about three universes, so I would not recommend exceeding two).<br>
                The code is based quite closely on a similar project made by <a href="https://github.com/alfo/artnet" target="_blank">Alex Forey</a> (original project pictured below), however both his code and the
                original library code by Toni Merino will not compile in modern versions of the Arduino IDE. This is because many register names have been changed since the library
                was written, so much of the old code has been "poisoned". Personally, I can't stand having to use multiple versions of the same software, so I re-wrote the library
                with the modern register names and syntaxes. This updated library can be found on <a href="https://github.com/BOJIT/Artnet_Node" target="_blank">Github</a>, along with the rest of my source code.
                <br>Aside from the Arduino Mega, I used a pair of MAX485 ICs to drive the DMX lines ( optical isolation is recommended here, but not mandatory), and a Wiznet W5100 breakout board for Ethernet connectivity.
                I didn't feel like making a PCB for this project, so I wired it all together on a piece of stripboard and enclosed the entire thing in an old extrusion-style case I had lying about.
            </p>
            <div class="w3-container blog-item" style="margin:auto;--desktopWidth:50%">
                <img src="img/AlexForey.jpg" placeholder="Alex Forey" width="100%">
            </div>
            <p>
                It has been a while since I modified the <i>libDMX.cpp</i> library, but as far as I can remember, most of the trouble
                was caused by the <b>SIG_USART</b> syntax, which has been poisoned since Arduino Version 0023. If you encounter similar 
                syntax bugs elsewhere, you essentially have to convert this syntax:
            </p>       
            <pre style="color:#000000;background:#ffffff;"><span style="color:#004a43; ">#</span><span style="color:#004a43; ">if</span><span style="color:#004a43; "> </span><span style="color:#004a43; ">defined</span><span style="color:#0000ff; ">(</span><span style="color:#004a43; ">USE_UART0</span><span style="color:#0000ff; ">)</span>
                ISR<span style="color:#0000ff; ">(</span>SIG_USART0_TRANS<span style="color:#0000ff; ">)</span>
                <span style="color:#0000ff; ">{</span>
                ArduinoDmx0<span style="color:#0000ff; ">.</span>Process_ISR_TX<span style="color:#0000ff; ">(</span><span style="color:#800000; ">0</span><span style="color:#0000ff; ">)</span><span style="color:#0000ff; ">;</span>
                <span style="color:#0000ff; ">}</span>
            <span style="color:#004a43; ">#</span><span style="color:#004a43; ">endif</span>
            </pre>
            <p>
                ...into this syntax:
            </p>
            <pre style="color:#000000;background:#ffffff;"><span style="color:#004a43; ">#</span><span style="color:#004a43; ">if</span><span style="color:#004a43; "> </span><span style="color:#004a43; ">defined</span><span style="color:#0000ff; ">(</span><span style="color:#004a43; ">USE_UART0</span><span style="color:#0000ff; ">)</span>
                ISR<span style="color:#0000ff; ">(</span>USART0_TX_vect<span style="color:#0000ff; ">)</span>
                <span style="color:#0000ff; ">{</span>
                ArduinoDmx0<span style="color:#0000ff; ">.</span>Process_ISR_TX<span style="color:#0000ff; ">(</span><span style="color:#800000; ">0</span><span style="color:#0000ff; ">)</span><span style="color:#0000ff; ">;</span>
                <span style="color:#0000ff; ">}</span>
            <span style="color:#004a43; ">#</span><span style="color:#004a43; ">endif</span>
            </pre>
            <br>
            <div class="w3-container blog-item" style="margin:auto;--desktopWidth:50%">
                <img src="img/Prototype.JPG" placeholder="Prototype" width="100%">
            </div>
            <p>
                This project was actually relatively quick to get up and running. While I haven't got some of the fancier features you would
                expect in an Artnet node to work, like remote configuration and auto discovery, the actual recieving of packets and outputting 
                DMX is rock solid, and has not let me down in a performance as of yet. The nice thing about Artnet compared to the USB interfaces
                is the ability to set up redundancy. If you direct two Artnet streams at a single address, the node will simply take the highest
                value of the two streams, so if one console goes down during a show, the other will take over seamlessly.<br>
                Below is a picture off my first test of operation, paired with my custom MagicQ wing (read about that <a href="/projects/2017/11/25/MagicQ_Wing/" target="_blank">here</a>).
                The combination of the two devices make a very powerful lighting console, which can act as a backup for the main venue console,
                all for a total of about £40 between the two projects. This is all part of my ongoing project to make the ultimate PC-based lighting console :) 
            </p>
            <div class="w3-container blog-item" style="margin:auto;--desktopWidth:50%">
                <img src="img/Test.JPG" placeholder="Test" width="100%">
            </div>
            <p>
                When all tidied up, the unit looks quite smart on the outside (despite being a complete mess inside). 
                This was also the first project I made with an integrated mains supply. When doing a theatre get-in, the last
                thing you want to be doing is digging through boxes to find the right wall adapter! When doing this it is very
                important to make sure the case is properly mounted and everything inside the case is rigidly mounted, so as to
                prevent any potential shorts between the live AC input and the control circuitry.<br>
                I also re-wrote the code to use these really cutesy OLED displays you can get on <a href="https://www.ebay.co.uk/itm/IIC-I2C-0-91-128x32-white-OLED-LCD-Display-Module-3-3v-5v-For-Arduino-PIC-PSHN/132893477621?epid=4002658264&hash=item1ef1118af5:g:lKYAAOSwu05bQsUy"
                target="_blank">EBay</a> for next to nothing. At the moment I have not implemented encoder support for configuring the node
                IP address, as I was nervous someone would fiddle with the settings midway through our last show, however this is something
                I am planning to do if I get round to updating this project.
            </p>
            <div class="w3-container blog-item" style="margin:auto;--desktopWidth:50%">
                <img src="img/LCD.JPG" placeholder="LCD" width="100%">
            </div>
            <p>
                In the future I am planning to port this project to a much cheaper ARM development board like the
                <a href="https://wiki.stm32duino.com/index.php?title=Blue_Pill" target="_blank">STM32 'Blue-Pill'</a>,
                as well as get remote configuration and discovery working. The target is to make a simple module that can be
                embedded into projects and cheaper fixtures to add networking capabilities retroactively.<br>
                However, suffice to say, this is quite a while off, as I have some more exciting projects in the pipeline!
            </p>
            <div class="w3-container blog-item" style="margin:auto;--desktopWidth:50%">
                <img src="img/Node.JPG" placeholder="Node" width="100%">
            </div>
            <br><br><br>
            <a href="/" style="text-decoration:none">
            <div class="w3-panel w3-white w3-border w3-border-gray w3-center w3-hover-opacity blog-item" 
            style="margin:auto;--desktopWidth:40%"><h2>Return to Home Page:</h2></div></a>
        </div>
    </div>

    <!-- Footer -->
    <hr />

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://www.youtube.com/channel/UCR7zc0TblvkjPy9DhAWUkvA" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-youtube-play fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/in/james-bennion-pedley-bab14a146/" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/BOJIT" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.facebook.com/James.BOJIT" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://soundcloud.com/james-bojit" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-soundcloud fa-stack-1x fa-inverse"></i>
                            </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- After footer scripts -->
    
    <!-- Tiler -->
    <script src="js/display.js"></script>
    
    <!-- jQuery -->
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

    <!-- Bootstrap -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- Gallery -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
</body>

</html>